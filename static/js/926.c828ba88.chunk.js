"use strict";(self.webpackChunktest_fe=self.webpackChunktest_fe||[]).push([[926],{7926:(e,n,a)=>{a.r(n),a.d(n,{default:()=>V});var t=a(2791),i=a(8335),r=a(4280);const l=[1,10],s=[1,2,5,12,30,75,187];var o=a(7689),c=a(1057),d=a(9629),m=a(5294),u=a(2618),f=a(3229),p=a(2007),v=a.n(p),b=a(4379),h=a(4124),g=a(6775),y=a(9847),N=(0,t.forwardRef)((function(e,n){var a=e.className,i=e.button,r=e.feedback,l=e.feedbackInvalid,s=e.feedbackValid,o=e.floatingLabel,c=e.tooltipFeedback,d=e.hitArea,m=e.id,u=e.indeterminate,p=e.inline,v=e.invalid,N=e.label,k=e.reverse,x=e.type,C=void 0===x?"checkbox":x,E=e.valid,T=(0,f._T)(e,["className","button","feedback","feedbackInvalid","feedbackValid","floatingLabel","tooltipFeedback","hitArea","id","indeterminate","inline","invalid","label","reverse","type","valid"]),w=(0,t.useRef)(null),j=(0,y.A7)(n,w);(0,t.useEffect)((function(){w.current&&u&&(w.current.indeterminate=u)}),[u,w.current]);var I=function(){return t.createElement("input",(0,f.pi)({type:C,className:(0,b.Z)(i?"btn-check":"form-check-input",{"is-invalid":v,"is-valid":E,"me-2":d}),id:m},T,{ref:j}))},F=function(){return t.createElement(h.X,{describedby:T["aria-describedby"],feedback:r,feedbackInvalid:l,feedbackValid:s,floatingLabel:o,invalid:v,tooltipFeedback:c,valid:E})},S=function(){var e;return t.createElement(g.L,(0,f.pi)({customClassName:(0,b.Z)(i?(0,b.Z)("btn",i.variant?"btn-".concat(i.variant,"-").concat(i.color):"btn-".concat(i.color),(e={},e["btn-".concat(i.size)]=i.size,e),"".concat(i.shape)):"form-check-label")},m&&{htmlFor:m}),N)};return t.createElement((function(){return i?t.createElement(t.Fragment,null,t.createElement(I,null),N&&t.createElement(S,null),t.createElement(F,null)):N?d?t.createElement(t.Fragment,null,t.createElement(I,null),t.createElement(g.L,(0,f.pi)({customClassName:(0,b.Z)("form-check-label stretched-link",a)},m&&{htmlFor:m}),N),t.createElement(F,null)):t.createElement("div",{className:(0,b.Z)("form-check",{"form-check-inline":p,"form-check-reverse":k,"is-invalid":v,"is-valid":E},a)},t.createElement(I,null),t.createElement(S,null),t.createElement(F,null)):t.createElement(I,null)}),null)}));N.propTypes=(0,f.pi)({button:v().object,className:v().string,hitArea:v().oneOf(["full"]),id:v().string,indeterminate:v().bool,inline:v().bool,label:v().oneOfType([v().string,v().node]),reverse:v().bool,type:v().oneOf(["checkbox","radio"])},h.X.propTypes),N.displayName="CFormCheck";var k=a(7316),x=a(1987),C=a(184);const E=e=>{const{questionString:n,answerString:a,termDefinition:t,questionInputChanged:i,answerInputChanged:r,checkBoxClicked:l,isEnabled:s}=e;return(0,C.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,C.jsx)(N,{id:"termEnabled",onClick:e=>(e=>{e.preventDefault(),l()})(e),defaultChecked:s}),(0,C.jsxs)("div",{className:"mb-3 w-100 ms-2",children:[(0,C.jsx)(m.j,{className:"mb-2",type:"text",placeholder:t.name,disabled:!0}),(0,C.jsxs)(k.Y,{className:"mb-3",children:[(0,C.jsx)(x.w,{id:"inputGroup-sizing-default",children:"Question"}),(0,C.jsx)(m.j,{value:n,disabled:!s,onChange:e=>i(e.target.value)})]}),(0,C.jsxs)(k.Y,{className:"mb-3",children:[(0,C.jsx)(x.w,{id:"inputGroup-sizing-default",children:"Answer"}),(0,C.jsx)(m.j,{value:a,disabled:!s,onChange:e=>r(e.target.value)})]})]})]})},T=(e,n)=>a=>n(e,a);var w=a(9290),j=a(4846),I=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>"],F=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='440 240 272 240 272 72 240 72 240 240 72 240 72 272 240 272 240 440 272 440 272 272 440 272 440 240' class='ci-primary'/>"];const S=e=>{let{title:n,intervals:a,onIntervalsChanges:t}=e;return(0,C.jsxs)("div",{children:[(0,C.jsx)(w.u,{className:"",children:n}),a.map(((e,n)=>(0,C.jsxs)("div",{className:"w-25 mb-2 d-flex align-items-center gap-3",children:[(0,C.jsx)(m.j,{type:"number",min:1,onChange:e=>((e,n)=>{a[e]=+n,t(a)})(n,e.target.value),value:e}),(0,C.jsx)(j.Z,{icon:I,onClick:()=>(e=>{a.splice(e,1),t(a)})(n)})]},"interval-".concat(n)))),(0,C.jsx)(j.Z,{className:"mt-1",icon:F,size:"xl",onClick:()=>{a.push(1),t(a)}})]})};var Z=a(1202);var D=a(7758),L=a(4261);const O=e=>e.map((e=>({termDefinition:e,questionString:"",answerString:"",isEnabled:!0})));const V=function(){const{id:e}=(0,o.UO)(),n=(0,o.s0)(),{profile:a}=(0,t.useContext)(i.Z),{showToast:f}=(0,t.useContext)(r.Z),p=void 0!==e,[v,b]=(0,t.useState)(""),[h,g]=(0,t.useState)(O(a.termDefinitions)),[y,N]=(0,t.useState)(l),[k,x]=(0,t.useState)(s),[w,j]=(0,t.useState)(!0);(0,t.useEffect)((()=>{if(p){const i=a.trainingDefinitions.find((n=>n.id===e));i?(b(i.name),N(i.learningIntervals),x(i.repetitionIntervals),g((n=a.termDefinitions,t=i.configuration,n.map((e=>{var n,a,i,r;return{termDefinition:e,questionString:null!==(n=null===(a=t.get(e))||void 0===a?void 0:a.questionPattern)&&void 0!==n?n:"",answerString:null!==(i=null===(r=t.get(e))||void 0===r?void 0:r.answerPattern)&&void 0!==i?i:"",isEnabled:t.has(e)}}))))):j(!1)}var n,t}),[]);const I=(0,t.useCallback)((()=>{b(""),g(O(a.termDefinitions)),N(l),x(s)}),[b,g]),F=(e,n)=>{h[e].questionString=n,g([...h])},V=(e,n)=>{h[e].answerString=n,g([...h])};return w?(0,C.jsxs)("div",{children:[(0,C.jsxs)(c.f,{children:[(0,C.jsx)(d.S,{href:"#/trainings",children:"Trainings"}),(0,C.jsx)(d.S,{active:!0,children:p?"Edit training":"Add training"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(m.j,{className:"w-50 mb-4",placeholder:"Training name",onChange:e=>{return n=e.target.value,void b(n);var n},value:v}),h.map(((e,n)=>(0,C.jsx)(E,{questionString:e.questionString,answerString:e.answerString,termDefinition:e.termDefinition,questionInputChanged:T(n,F),answerInputChanged:T(n,V),checkBoxClicked:()=>(e=>{h[e].isEnabled=!h[e].isEnabled,g([...h])})(n),isEnabled:e.isEnabled},n))),(0,C.jsxs)("div",{className:"d-flex flex-column gap-4",children:[(0,C.jsx)(S,{title:"Learning intervals (in minutes)",intervals:y,onIntervalsChanges:e=>{N([...e])}}),(0,C.jsx)(S,{title:"Repetition intervals (in days)",intervals:k,onIntervalsChanges:e=>{x([...e])}})]}),(0,C.jsxs)("div",{className:"mt-5 d-flex justify-content-between",children:[(0,C.jsx)(u.u,{onClick:()=>{const t=function(e,n,a,t,i){return(0,Z.Qc)(n)?"Training name is empty":e.trainingDefinitions.some((e=>e.name===n&&e.id!==i))?"Training with the same already exists":a.length<=0?"Learning intervals should not be empty":t.length<=0?"Repetition intervals should not be empty":null}(a,v,y,k,e);if(t)return void f(t,"danger");const i=new Map;h.filter((e=>e.isEnabled)).forEach((e=>i.set(e.termDefinition,{id:(0,L.Z)(),lastEditDate:Date.now(),questionPattern:e.questionString,answerPattern:e.answerString})));const r=function(e){var n;return e.size<=0?"No training rule is defined":null!==(n=Array.from(e.entries()).map((e=>{const n=new Set(e[0].attributes.map((e=>e.name))),a=(0,Z.Il)(e[1].questionPattern),t=(0,Z.Il)(e[1].answerPattern);if(a.length<=0)return"Question pattern should be filled with attributes (use {} for this)";if(t.length<=0)return"Answer pattern should be filled with attributes (use {} for this)";const i=a.filter((e=>!n.has(e)));if(i.length>0)return"Term ".concat(e[0].name," does not have attribute with name: ").concat(i.join(", "));const r=t.filter((e=>!n.has(e)));return r.length>0?"Term ".concat(e[0].name," does not have attribute with name: ").concat(r.join(", ")):null})).filter((e=>null!==e))[0])&&void 0!==n?n:null}(i);if(r)f(r,"danger");else{if(p){const n=a.trainingDefinitions.find((n=>n.id===e));n.name=v,n.configuration=i,n.learningIntervals=y,n.repetitionIntervals=k,n.lastEditDate=Date.now()}else a.trainingDefinitions.push({id:(0,L.Z)(),lastEditDate:Date.now(),name:v,configuration:i,learningIntervals:y,repetitionIntervals:k});(0,D.kO)(a),p?(f("Training successfully updated","success"),n(-1)):(f("Training successfully created","success"),I())}},color:"primary",children:"Save"}),p?(0,C.jsx)(u.u,{onClick:()=>{if(!e)return;const t=a.trainingDefinitions.find((n=>n.id===e));a.trainingProgresses.delete(t),a.trainingDefinitions=a.trainingDefinitions.filter((e=>e.id!==t.id)),(0,D.kO)(a),f("Training removed","success"),n(-1)},color:"danger",children:"Delete"}):null]})]})]}):(0,C.jsx)("div",{children:"Id is not correct"})}},1202:(e,n,a)=>{function t(e){const n=e.match(/\{([^}]+)\}/g);return n?n.map((e=>e.slice(1,-1))):[]}function i(e){return e.replace(/\{/g,"<%= ").replace(/\}/g," %>")}function r(e){return null===e||e.length<=0||""===e.trim()}a.d(n,{Il:()=>t,Qc:()=>r,tG:()=>i})},1057:(e,n,a)=>{a.d(n,{f:()=>o});var t=a(3229),i=a(2791),r=a(2007),l=a.n(r),s=a(4379),o=(0,i.forwardRef)((function(e,n){var a=e.children,r=e.className,l=(0,t._T)(e,["children","className"]);return i.createElement("nav",{"aria-label":"breadcrumb"},i.createElement("ol",(0,t.pi)({className:(0,s.Z)("breadcrumb",r)},l,{ref:n}),a))}));o.propTypes={children:l().node,className:l().string},o.displayName="CBreadcrumb"},9629:(e,n,a)=>{a.d(n,{S:()=>c});var t=a(3229),i=a(2791),r=a(2007),l=a.n(r),s=a(4379),o=a(9854),c=(0,i.forwardRef)((function(e,n){var a=e.children,r=e.active,l=e.className,c=e.href,d=(0,t._T)(e,["children","active","className","href"]);return i.createElement("li",(0,t.pi)({className:(0,s.Z)("breadcrumb-item",{active:r},l)},r&&{"aria-current":"page"},d,{ref:n}),c?i.createElement(o.h,{href:c},a):a)}));c.propTypes={active:l().bool,children:l().node,className:l().string,href:l().string},c.displayName="CBreadcrumbItem"},9290:(e,n,a)=>{a.d(n,{u:()=>o});var t=a(3229),i=a(2791),r=a(2007),l=a.n(r),s=a(4379),o=(0,i.forwardRef)((function(e,n){var a=e.children,r=e.component,l=void 0===r?"p":r,o=e.className,c=(0,t._T)(e,["children","component","className"]);return i.createElement(l,(0,t.pi)({className:(0,s.Z)("card-text",o)},c,{ref:n}),a)}));o.propTypes={children:l().node,className:l().string,component:l().elementType},o.displayName="CCardText"},4124:(e,n,a)=>{a.d(n,{X:()=>c});var t=a(3229),i=a(2791),r=a(2007),l=a.n(r),s=a(4379),o=(0,i.forwardRef)((function(e,n){var a,r=e.children,l=e.className,o=e.component,c=void 0===o?"div":o,d=e.invalid,m=e.tooltip,u=e.valid,f=(0,t._T)(e,["children","className","component","invalid","tooltip","valid"]);return i.createElement(c,(0,t.pi)({className:(0,s.Z)((a={},a["invalid-".concat(m?"tooltip":"feedback")]=d,a["valid-".concat(m?"tooltip":"feedback")]=u,a),l)},f,{ref:n}),r)}));o.propTypes={children:l().node,className:l().string,component:l().elementType,invalid:l().bool,tooltip:l().bool,valid:l().bool},o.displayName="CFormFeedback";var c=function(e){var n=e.describedby,a=e.feedback,r=e.feedbackInvalid,l=e.feedbackValid,s=e.invalid,c=e.tooltipFeedback,d=e.valid;return i.createElement(i.Fragment,null,a&&(d||s)&&i.createElement(o,(0,t.pi)({},s&&{id:n},{invalid:s,tooltip:c,valid:d}),a),r&&i.createElement(o,{id:n,invalid:!0,tooltip:c},r),l&&i.createElement(o,{valid:!0,tooltip:c},l))};c.propTypes={describedby:l().string,feedback:l().oneOfType([l().node,l().string]),feedbackValid:l().oneOfType([l().node,l().string]),feedbackInvalid:l().oneOfType([l().node,l().string]),invalid:l().bool,tooltipFeedback:l().bool,valid:l().bool},c.displayName="CFormControlValidation"},1380:(e,n,a)=>{a.d(n,{e:()=>u});var t=a(3229),i=a(2791),r=a(2007),l=a.n(r),s=a(4124),o=a(4379),c=(0,i.forwardRef)((function(e,n){var a=e.children,r=e.className,l=(0,t._T)(e,["children","className"]);return i.createElement("div",(0,t.pi)({className:(0,o.Z)("form-floating",r)},l,{ref:n}),a)}));c.propTypes={children:l().node,className:l().string},c.displayName="CFormFloating";var d=a(6775),m=(0,i.forwardRef)((function(e,n){var a=e.children,r=e.className,l=e.component,s=void 0===l?"div":l,c=(0,t._T)(e,["children","className","component"]);return i.createElement(s,(0,t.pi)({className:(0,o.Z)("form-text",r)},c,{ref:n}),a)}));m.propTypes={children:l().node,className:l().string,component:l().elementType},m.displayName="CFormText";var u=function(e){var n=e.children,a=e.describedby,t=e.feedback,r=e.feedbackInvalid,l=e.feedbackValid,o=e.floatingClassName,u=e.floatingLabel,f=e.id,p=e.invalid,v=e.label,b=e.text,h=e.tooltipFeedback,g=e.valid,y=function(){return i.createElement(s.X,{describedby:a,feedback:t,feedbackInvalid:r,feedbackValid:l,floatingLabel:u,invalid:p,tooltipFeedback:h,valid:g})};return u?i.createElement(c,{className:o},n,i.createElement(d.L,{htmlFor:f},v||u),b&&i.createElement(m,{id:a},b),i.createElement(y,null)):i.createElement(i.Fragment,null,v&&i.createElement(d.L,{htmlFor:f},v),n,b&&i.createElement(m,{id:a},b),i.createElement(y,null))};u.propTypes=(0,t.pi)({children:l().node,floatingClassName:l().string,floatingLabel:l().oneOfType([l().node,l().string]),label:l().oneOfType([l().node,l().string]),text:l().oneOfType([l().node,l().string])},s.X.propTypes),u.displayName="CFormControlWrapper"},5294:(e,n,a)=>{a.d(n,{j:()=>c});var t=a(3229),i=a(2791),r=a(2007),l=a.n(r),s=a(4379),o=a(1380),c=(0,i.forwardRef)((function(e,n){var a,r=e.children,l=e.className,c=e.delay,d=void 0!==c&&c,m=e.feedback,u=e.feedbackInvalid,f=e.feedbackValid,p=e.floatingClassName,v=e.floatingLabel,b=e.id,h=e.invalid,g=e.label,y=e.onChange,N=e.plainText,k=e.size,x=e.text,C=e.tooltipFeedback,E=e.type,T=void 0===E?"text":E,w=e.valid,j=(0,t._T)(e,["children","className","delay","feedback","feedbackInvalid","feedbackValid","floatingClassName","floatingLabel","id","invalid","label","onChange","plainText","size","text","tooltipFeedback","type","valid"]),I=(0,i.useState)(),F=I[0],S=I[1];return(0,i.useEffect)((function(){var e=setTimeout((function(){return F&&y&&y(F)}),"number"===typeof d?d:500);return function(){return clearTimeout(e)}}),[F]),i.createElement(o.e,{describedby:j["aria-describedby"],feedback:m,feedbackInvalid:u,feedbackValid:f,floatingClassName:p,floatingLabel:v,id:b,invalid:h,label:g,text:x,tooltipFeedback:C,valid:w},i.createElement("input",(0,t.pi)({className:(0,s.Z)(N?"form-control-plaintext":"form-control",(a={},a["form-control-".concat(k)]=k,a["form-control-color"]="color"===T,a["is-invalid"]=h,a["is-valid"]=w,a),l),id:b,type:T,onChange:function(e){return d?S(e):y&&y(e)}},j,{ref:n}),r))}));c.propTypes=(0,t.pi)({className:l().string,id:l().string,delay:l().oneOfType([l().bool,l().number]),plainText:l().bool,size:l().oneOf(["sm","lg"]),type:l().oneOfType([l().oneOf(["color","file","text"]),l().string])},o.e.propTypes),c.displayName="CFormInput"},6775:(e,n,a)=>{a.d(n,{L:()=>o});var t=a(3229),i=a(2791),r=a(2007),l=a.n(r),s=a(4379),o=(0,i.forwardRef)((function(e,n){var a=e.children,r=e.className,l=e.customClassName,o=(0,t._T)(e,["children","className","customClassName"]);return i.createElement("label",(0,t.pi)({className:null!==l&&void 0!==l?l:(0,s.Z)("form-label",r)},o,{ref:n}),a)}));o.propTypes={children:l().node,className:l().string,customClassName:l().string},o.displayName="CFormLabel"},7316:(e,n,a)=>{a.d(n,{Y:()=>o});var t=a(3229),i=a(2791),r=a(2007),l=a.n(r),s=a(4379),o=(0,i.forwardRef)((function(e,n){var a,r=e.children,l=e.className,o=e.size,c=(0,t._T)(e,["children","className","size"]);return i.createElement("div",(0,t.pi)({className:(0,s.Z)("input-group",(a={},a["input-group-".concat(o)]=o,a),l)},c,{ref:n}),r)}));o.propTypes={children:l().node,className:l().string,size:l().oneOf(["sm","lg"])},o.displayName="CInputGroup"},1987:(e,n,a)=>{a.d(n,{w:()=>o});var t=a(3229),i=a(2791),r=a(2007),l=a.n(r),s=a(4379),o=(0,i.forwardRef)((function(e,n){var a=e.children,r=e.className,l=e.component,o=void 0===l?"span":l,c=(0,t._T)(e,["children","className","component"]);return i.createElement(o,(0,t.pi)({className:(0,s.Z)("input-group-text",r)},c,{ref:n}),a)}));o.propTypes={children:l().node,className:l().string,component:l().elementType},o.displayName="CInputGroupText"}}]);
//# sourceMappingURL=926.c828ba88.chunk.js.map